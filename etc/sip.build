<?xml version="1.0"?>
<project name="SIP" default="build" basedir="..">
  <description>SIP stack for Windows</description>
  <property name="debug" value="true" overwrite="false" />
  <target name="clean" description="remove all generated files">
    <delete file="bin\SIP.exe" failonerror="false" />
    <delete failonerror="false">
      <fileset>
        <include name="build\*.dcu" />
	<include name="src\*.dcu" />
	<include name="test\*.dcu" />
      </fileset>
    </delete>
  </target>
  <target name="build-d6" description="Compiles the source code for Delphi 6" depends="clean">
    <exec program="dcc32" basedir="C:\Program Files\Borland\Delphi6\bin">
      <arg value="-B" />
      <arg value="-CC" />
      <arg value="-E.\bin" />
      <arg value="-IC:\Program Files\Borland\Delphi6\source\Indy9;C:\Program Files\Borland\Delphi6\source\dUnit" />
      <arg value="-LE.\bin" />
      <arg value="-N0.\build" />
      <arg value="-OC:\Program Files\Borland\Delphi6\source\Indy9;C:\Program Files\Borland\Delphi6\source\dUnit" />
      <arg value="-UC:\Program Files\Borland\Delphi6\source\Indy9;C:\Program Files\Borland\Delphi6\source\dUnit" />
      <arg value="-RC:\Program Files\Borland\Delphi6\source\Indy9;C:\Program Files\Borland\Delphi6\lib" />
      <arg value="SIP.dpr" />
    </exec>
  </target>
  <target name="build-d7" description="Compiles the source code for Delphi 7" depends="clean">
    <exec program="dcc32" basedir="C:\Program Files\Borland\Delphi7\bin">
      <arg value="-B" />
      <arg value="-CC" />
      <arg value="-E.\bin" />
      <arg value="-IC:\Program Files\Borland\Delphi7\source\Indy9;C:\Program Files\Borland\Delphi7\source\dUnit" />
      <arg value="-LE.\bin" />
      <arg value="-N0.\build" />
      <arg value="-OC:\Program Files\Borland\Delphi7\source\Indy9;C:\Program Files\Borland\Delphi7\source\dUnit" />
      <arg value="-UC:\Program Files\Borland\Delphi7\source\Indy9;C:\Program Files\Borland\Delphi7\source\dUnit" />
      <arg value="-RC:\Program Files\Borland\Delphi7\source\Indy9;C:\Program Files\Borland\Delphi7\lib" />
      <arg value="SIP.dpr" />
    </exec>
  </target>
  <target name="build-d2006" description="Compiles the source code for Delphi 2006" depends="clean">
    <exec program="dcc32" basedir="C:\Program Files\Borland\BDS\4.0\bin">
      <arg value="-B" />
      <arg value="-CC" />
      <arg value="-E.\bin" />
      <arg value="-IC:\Program Files\Borland\BDS\4.0\source\Indy9;C:\Program Files\Borland\BDS\4.0\source\dUnit" />
      <arg value="-LE.\bin" />
      <arg value="-N0.\build" />
      <arg value="-OC:\Program Files\Borland\BDS\4.0\source\Indy9;C:\Program Files\Borland\BDS\4.0\source\dUnit" />
      <arg value="-UC:\Program Files\Borland\BDS\4.0\source\Indy9;C:\Program Files\Borland\BDS\4.0\source\dUnit" />
      <arg value="-RC:\Program Files\Borland\BDS\4.0\source\Indy9;C:\Program Files\Borland\BDS\4.0\lib" />
      <arg value="SIP.dpr" />
    </exec>
  </target>
  <target name="test" description="Test the application. Assumes $TEST.">
    <exec program="SIP.exe" basedir="bin" />
  </target>
</project>
